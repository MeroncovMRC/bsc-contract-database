// SPDX-License-Identifier: TradDEX DAO Presale
pragma solidity ^0.8.2;

contract TradDEXPresale{
    mapping(address => uint) public balances;           
    mapping(address => uint) public balances_eth;           
    
    address public admin;    
    address payable admin_to;    
    uint public invest_price = 1000000;
    uint public invest_min = 30000000000000000;        
    uint public invested_sum = 0;
    uint public paused = 0;

    constructor(){
        admin = msg.sender;    
        admin_to = payable(admin);    
    }

    function change_admin(address new_admin) public returns(bool){
        require(msg.sender==admin,'allow only admin');
        admin = new_admin;
        admin_to = payable(admin); 
        return true;
    }

    function change_pause() public returns(bool){
        require(msg.sender==admin,'allow only admin');
        if(paused==0){
            paused = 1;
        }else{
            paused = 0;
        }
        return true;
    }

    function change_invest_min(uint value) public returns(bool){
        require(msg.sender==admin,'allow only admin');
        require(paused==0,'is paused no access');
    
        invest_min = value;
        return true;
    }

    function change_invest_price(uint value) public returns(bool){
        require(msg.sender==admin,'allow only admin');
        require(paused==0,'is paused no access');
    
        invest_price = value;
        return true;
    }

    receive() external payable {
        require(paused==0,'is paused no access');
        require(msg.sender!=admin,'admin is not allowed');        
        if(msg.value<invest_min){revert('investment to low');}                

        balances[msg.sender] += (msg.value * invest_price);
        balances_eth[msg.sender] += msg.value;

        invested_sum += msg.value;

        admin_to.transfer(msg.value);
    }

    function transfer_for(address to) external payable {
        require(paused==0,'is paused no access');
        require(msg.sender!=admin,'admin is not allowed');        
        require(to!=admin,'to as admin is not allowed');        
        if(msg.value<invest_min){revert('investment to low');}                

        balances[to] += (msg.value * invest_price);
        balances_eth[to] += msg.value;

        invested_sum += msg.value;

        admin_to.transfer(msg.value);    
    }
}